{"version":3,"sources":["../../api/controllers/meals.js"],"names":["Meal","require","module","exports","create","req","res","console","log","params","name","body","size","price","menuId","then","status","send","meal","catch","error","updateMeal","find","where","id","mealId","message","update","updated","deleteMeal","destroy"],"mappings":";;AAAA,IAAMA,OAAOC,QAAQ,WAAR,EAAqBD,IAAlC;;AAEAE,OAAOC,OAAP,GAAiB;AACfC,QADe,kBACRC,GADQ,EACHC,GADG,EACE;AACfC,YAAQC,GAAR,CAAYH,IAAII,MAAhB;AACA,WAAOT,KACJI,MADI,CACG;AACNM,YAAML,IAAIM,IAAJ,CAASD,IADT;AAENE,YAAMP,IAAIM,IAAJ,CAASC,IAFT;AAGNC,aAAOR,IAAIM,IAAJ,CAASE,KAHV;AAINC,cAAQT,IAAII,MAAJ,CAAWK;AAJb,KADH,EAOJC,IAPI,CAOC;AAAA,aAAQT,IAAIU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,IAArB,CAAR;AAAA,KAPD,EAQJC,KARI,CAQE;AAAA,aAASb,IAAIU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBG,KAArB,CAAT;AAAA,KARF,CAAP;AASD,GAZc;AAcfC,YAde,sBAcJhB,GAdI,EAcCC,GAdD,EAcM;AACnB,WAAON,KACJsB,IADI,CACC;AACJC,aAAO;AACLC,YAAInB,IAAII,MAAJ,CAAWgB,MADV;AAELX,gBAAQT,IAAII,MAAJ,CAAWK;AAFd;AADH,KADD,EAOJC,IAPI,CAOC,UAACG,IAAD,EAAU;AACd,UAAI,CAACA,IAAL,EAAW;AACT,eAAOZ,IAAIU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BS,mBAAS;AADiB,SAArB,CAAP;AAGD;AACD,aAAOR,KACJS,MADI,CACG;AACNjB,cAAML,IAAIM,IAAJ,CAASD,IAAT,IAAiBQ,KAAKR,IADtB;AAENG,eAAOR,IAAIM,IAAJ,CAASE,KAAT,IAAkBK,KAAKL,KAFxB;AAGND,cAAMP,IAAIM,IAAJ,CAASC,IAAT,IAAiBM,KAAKN;;AAHtB,OADH,EAOJG,IAPI,CAOC;AAAA,eAAWT,IAAIU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBW,OAArB,CAAX;AAAA,OAPD,EAQJT,KARI,CAQE;AAAA,eAASb,IAAIU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBG,KAArB,CAAT;AAAA,OARF,CAAP;AASD,KAtBI,EAuBJD,KAvBI,CAuBE;AAAA,aAASb,IAAIU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBG,KAArB,CAAT;AAAA,KAvBF,CAAP;AAwBD,GAvCc;AAyCfS,YAzCe,sBAyCJxB,GAzCI,EAyCCC,GAzCD,EAyCM;AACnB,WAAON,KACJsB,IADI,CACC;AACJC,aAAO;AACLC,YAAInB,IAAII,MAAJ,CAAWgB,MADV;AAELX,gBAAQT,IAAII,MAAJ,CAAWK;AAFd;AADH,KADD,EAOJC,IAPI,CAOC,UAACG,IAAD,EAAU;AACd,UAAI,CAACA,IAAL,EAAW;AACT,eAAOZ,IAAIU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BS,mBAAS;AADiB,SAArB,CAAP;AAGD;;AAED,aAAOR,KACJY,OADI,GAEJf,IAFI,CAEC;AAAA,eAAMT,IAAIU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC/BS,mBAAS;AADsB,SAArB,CAAN;AAAA,OAFD,EAKJP,KALI,CAKE;AAAA,eAASb,IAAIU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBG,KAArB,CAAT;AAAA,OALF,CAAP;AAMD,KApBI,EAqBJD,KArBI,CAqBE;AAAA,aAASb,IAAIU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBG,KAArB,CAAT;AAAA,KArBF,CAAP;AAsBD;AAhEc,CAAjB","file":"meals.js","sourcesContent":["const Meal = require('../models').Meal;\n\nmodule.exports = {\n  create(req, res) {\n    console.log(req.params);\n    return Meal\n      .create({\n        name: req.body.name,\n        size: req.body.size,\n        price: req.body.price,\n        menuId: req.params.menuId,\n      })\n      .then(meal => res.status(201).send(meal))\n      .catch(error => res.status(400).send(error));\n  },\n\n  updateMeal(req, res) {\n    return Meal\n      .find({\n        where: {\n          id: req.params.mealId,\n          menuId: req.params.menuId\n        }\n      })\n      .then((meal) => {\n        if (!meal) {\n          return res.status(404).send({\n            message: 'meal not found',\n          });\n        }\n        return meal\n          .update({\n            name: req.body.name || meal.name,\n            price: req.body.price || meal.price,\n            size: req.body.size || meal.size,\n\n          })\n          .then(updated => res.status(200).send(updated))\n          .catch(error => res.status(400).send(error));\n      })\n      .catch(error => res.status(400).send(error));\n  },\n\n  deleteMeal(req, res) {\n    return Meal\n      .find({\n        where: {\n          id: req.params.mealId,\n          menuId: req.params.menuId\n        }\n      })\n      .then((meal) => {\n        if (!meal) {\n          return res.status(404).send({\n            message: 'meal not found'\n          });\n        }\n\n        return meal\n          .destroy()\n          .then(() => res.status(200).send({\n            message: 'deleted'\n          }))\n          .catch(error => res.status(400).send(error));\n      })\n      .catch(error => res.status(400).send(error));\n  },\n};\n"]}