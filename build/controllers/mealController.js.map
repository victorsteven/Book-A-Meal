{"version":3,"sources":["../../api/controllers/mealController.js"],"names":["Meal","require","module","exports","create","req","res","console","log","params","name","body","size","price","menuId","then","meal","status","send","catch","error","list","findAll","todos","updateMeal","find","where","id","mealId","message","update","updated","deleteMeal","destroy"],"mappings":"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","sourcesContent":["// import Meal from '../models/meal';\nconst Meal = require('../models').Meal;\n\nmodule.exports = {\n  create(req, res) {\n    // return req.params\n    console.log(req.params);\n    // return req.params.menuId;\n    return Meal.create({\n      name: req.body.name,\n      size: req.body.size,\n      price: req.body.price,\n      menuId: req.params.menuId,\n    })\n      .then(meal => res.status(201).send(meal))\n      .catch(error => res.status(400).send(error));\n  },\n\n  list(req, res) {\n    return Meal.findAll({})\n      .then(todos => res.status(200).send(todos))\n      .catch(error => res.status(400).send(error));\n  },\n\n  updateMeal(req, res) {\n    console.log(req.params);\n    return Meal.find({\n      where: {\n        id: req.params.mealId,\n        menuId: req.params.menuId,\n      },\n    })\n      .then((meal) => {\n        if (!meal) {\n          return res.status(404).send({\n            message: 'meal not found',\n          });\n        }\n        console.log('we have the meal', meal);\n        return Meal\n          .update({\n            name: req.body.name || meal.name,\n            size: req.body.size || meal.size,\n            price: req.body.price || meal.price,\n          })\n          .then(updated => res.status(200).send(updated))\n          .catch(error => res.status(400).send(error));\n      })\n      .catch(error => res.status(400).send(error));\n  },\n\n  deleteMeal(req, res) {\n    return Meal\n      .find({\n        where: {\n          id: req.params.mealId,\n          menuId: req.params.menuId,\n        },\n      })\n      .then((meal) => {\n        if (!meal) {\n          return res.status(404).send({\n            message: 'meal not found',\n          });\n        }\n        return Meal\n          .destroy()\n          .then(() => res.status(200).send({\n            message: 'deleted',\n          }))\n          .catch(error => res.status(400).send(error));\n      })\n      .catch(error => res.status(400).send(error));\n  },\n};\n"],"file":"mealController.js"}